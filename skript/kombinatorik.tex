%
% c00-kombinatorik.tex -- 0. Kapitel, Kombinatorik
%
% (c) 2006 Prof. Dr. Andreas Mueller, HSR
% $Id: c01-wahrscheinlichkeit.tex,v 1.24 2008/09/15 23:49:57 afm Exp $
%
\rhead{Kombinatorik}
\chapter{Kombinatorik\label{chapter-kombinatorik}}
\index{Kombinatorik}
\section{Motivation}
Wenn man Aussagen "uber die (noch nicht definierte) Wahrscheinlichkeit
machen will, mit welcher ein Ereignis eintreten kann, sollte man sich
zun"achst einen "Uberblick dar"uber verschaffen, was es denn f"ur
Alternativen gibt. Wenn man mit einem W"urfel eine Eins w"urfelt, ist
das nicht mehr sehr beeindruckend, wenn man erf"ahrt, dass es ein
Tetraederw"urfel mit nur vier Seiten war. 

In den letzten Jahren konnte man immer wieder h"oren, die Naturkonstanten
in unserem Universum seien unwahrscheinlich genau aufeinander abgestimmt,
genau so dass es m"oglich sei, dass intelligentes Leben entstand.
Nat"urlich ist das Unsinn, denn unwahrscheinlich w"urde ja wohl
heissen, dass es sehr viele Alternativen gibt, in denen eben kein
intelligentes Leben entsteht. Dummerweise haben wir f"ur so eine Aussage
gar nicht gen"ugend Experimente, wir haben nun mal nur ein einziges
Universum, ganz abgesehen davon, dass wir keine Ahnung dar"uber haben,
was es genau f"ur Bedingungen braucht, damit intelligentes Leben
entstehen kann.

\section{Ziele}
Die Kombinatorik befasst sich mit z"ahlbaren diskreten Strukturen,
insbesondere versucht sie Antworten zu geben auf Fragen die
typischerweise mit ``Auf wieviele Arten \dots'' beginnen, zum Beispiel:
\begin{itemize}
\item Auf wieviele Arten kann man $n$ verschiedene Objekte anordnen?
\item Auf wieviele Arten kann man $k$ Objekte aus $n$ ausw"ahlen?
\item Auf wieviele Arten kann man $k$ mal ein Auswahl aus $n$ Objekten
treffen?
\end{itemize}

In diesem Kapitel wollen wir jedoch nur eine "Ubersicht "uber die
wichtigsten Z"ahl-Techniken zusammenstellen, damit sie uns sp"ater
bei der Berechnung von Wahrscheinlichkeiten zur Verf"ugung stehen.

\section{Produktregel: Die F"ur--jedes--gibt--es--Regel\label{kombinatorik-produktregel}}
\index{Produktregel}
$k$ Position m"ussen unabh"angig voneinander markiert werden, wobei
$n$ verschiedene Markierungen zur Verf"ugung stehen. Da die einzelnen
Entscheidungen unabh"angig sind voneinander, ist die Zahl der M"oglichkeiten
das Produkt der M"oglichkeiten an jeder einzelnen Position, also
$n^k$.

Stehen an den Positionen $i\in\{1,\dots,k\}$ jeweils die $n_i$
Wahlm"oglichkeiten
zur Verf"ugung, ist die Gesamtzahl der M"oglichkeiten:
\[
n_1\cdot n_2\cdots n_k=\prod_{i=1}^kn_i.
\]
Die Produktregel ist immer dann anwendbar wenn man das Entstehen
aller M"oglichkeiten aus den Wahlm"oglichkeiten an jeder Position
mit einem Satz wie dem folgenden beschreiben kann
\begin{quote}
F"ur jede der $n_1$ M"oglichkeiten an Position 1 gibt es eine
von der ersten Position unabh"angige
Anzahl $N$ M"oglichkeiten f"ur den Rest.
\end{quote}
Dann ist die Gesamtzahl der M"oglichkeiten $n_1\cdot N$. 
Nat"urlich wird man oft die Gr"osse $N$ durch eine "ahnliche,
verfeinerte Analyse bestimmen m"ussen.

\begin{beispiele}
\item Wie viele m"ogliche Augenzahlbilder k"onnen entstehen, wenn zwei
verschiedenfarbige W"urfel geworfen werden?

\begin{loesung}
Der erste W"urfel kann $n_1=6$ verschiedene Augenzahlen anzeigen,
der zweite $n_2=6$. Die beiden W"urfel sind unabh"angig voneinander,
also gibt es $n_1\cdot n_2=36$ verschiedene Augenzahlbilder.
\end{loesung}


\item Ein Autoh"andler bietet 5 verschiedene Fahrzeugtypen in 30
verschiedenen Farben an. Zu jedem Fahrzeugtyp gibt es 7 verschiedene
Extraausstattungen. Wieviele
verschiedene Fahrzeuge kann der Autoh"andler verkaufen?

\begin{loesung}
Offenbar sind alle die $n_1=5$ Fahrzeugtypen, die $n_2=30$ Farben
und die $n_3=7$ Extraausstattungen unabh"angig voneinenander w"ahlbar, also ist
die Gesamtzahl der m"oglichen Fahrzeuge $n_1n_2n_3=1050$.
\end{loesung}

\item Nehmen wir jetzt an, statt vorgegebener Ausstattungen mit
Extras k"onne jedes einzelne Extra unabh"angig gew"ahlt oder
abgelehnt werden. Es gebe 7 solche Extras. Wieviele verschiedene
Fahrzeuge k"onnen bestellt werden?

\begin{loesung}
Offenbar hat man jetzt f"ur jedes Extra die Wahl, ob man es dazunehmen
will oder nicht, man hat also f"ur jedes Extra zwei M"oglichkeiten.
F"ur jedes Extra kommt also ein Faktor $2$ hinzu, mithin hat man
$5\cdot 30
\cdot 2
\cdot 2
\cdot 2
\cdot 2
\cdot 2
\cdot 2
\cdot 2
\cdot 2=5\cdot 30\cdot 2^7=5\cdot 30 \cdot 128=19200$.
\end{loesung}

\item Das neue iPhone 5 kann man in weiss oder in schwarz
bestellen und in drei verschiedenen
Gr"ossen des Flashspeichers. Wieviele verschiedene iPhones gibt es?

\begin{loesung}
Offenbar kann man $n_1=2$ Farben und $n_2=3$ Speicherausstattungen
unabh"angig voneinander ausw"ah\-len, es gibt
daher $n_1n_2=6$ verschiedene iPhone 5.
\end{loesung}

\end{beispiele}

\section{Permutationen: Reihenfolge\label{kombinatorik-permutation}}
\index{Permutation}
\index{Reihenfolge}
Die Frage ``Auf wieviele Arten lassen sich $n$ verschieden Objekte anordnen?''
ist gleichbedeutend mit der Frage, wieviele Permutationen von $n$
Objekten es gibt. Die Zahl  $P_n$ der Permutationen von $n$ Objekten
kann durch den folgenden Abz"ahlprozess gefunden werden. Offenbar
muss f"ur jedes der Objekte ein Platz gew"ahlt werden, dies will
man Schrittweise tun. F"ur das erste Objekt stehen $n$ Pl"atze
zur Verf"ugung. F"ur jede Wahl des Platzes des ersten Objektes 
ist jetzt zu bestimmen, auf wieviele Arten die verbleibenden
$n-1$ Objekte platziert werden k"onnen. F"ur das zweite
Objekt muss einer der $n-1$ verbleibenden Pl"atze gew"ahlt werden.
Bisher haben sind also $n(n-1)$ M"oglichkeiten gefunden worden.
F"ur das dritte Objekt verbleiben jetzt noch $n-2$ Pl"atze,
was die bisher gefundenen M"oglichkeiten auf $n(n-1)(n-2)$
erh"oht. So geht es weiter bis zum letzten Objekt, f"ur welches
genau ein Platz "ubrig bleibt. Es folgt
\[
P_n=n(n-1)(n-2)\dots 2\cdot 1=n!
\]

Man kann f"ur $P_n$ auch eine Rekursionsformel finden. Um $n$ Objekte
zu platzieren, muss man zun"achst einen Platz f"ur das erste Objekt
platzieren, was auf $n$ Arten m"oglich ist. F"ur jede solche Wahl
muss man dann $n-1$ Objekte platzieren, daf"ur gibt es $P_{n-1}$
M"oglichkeiten. Also muss gelten
\[
P_n=nP_{n-1}.
\]
L"ost man die Rekursion auf, ergibt sich wieder $P_n=n!$.


\begin{beispiele}
\item In wievielen verschiedenen Reihenfolgen k"onnen die acht L"aufer
eines Rennens im Ziel eintreffen?

\begin{loesung}
Jede Reihenfolge ist m"oglich, also $8!=40320$ m"ogliche Reihenfolgen.
\end{loesung}

\item Einer der L"aufer von Beispiel 1 ist unbestrittener Favorit,
es ist klar, dass er gewinnen wird. Von einem anderen ist bekannt,
dass er keine Chance hat. Wieviele Reihenfolgen bleiben "ubrig?

\begin{loesung}
Nur noch sechs der acht L"aufer k"onnen in beliebiger Reihenfolge
eintreffen, also in $6!=720$ verschiedene Reihenfolgen.
\end{loesung}

\item An einem Wettkampf treten 7 M"anner und 7 Frauen an. Die M"anner
ermitteln untereinander einen Sieger, und die Frauen tun dasselbe.
Am Schluss stellen sich alle f"ur ein Erinnerungsfoto auf: links
die M"anner rechts die Frauen, beide in der im Wettkampf ermittelten
Rangfolge. Wieviele Erinnerungsfotos sind m"oglich?

\begin{loesung}
Es gibt $7!=5040$ Rangfolgen der M"anner, und ebensoviele bei den
Frauen. Die Ermittelung der Rangfolge bei den M"annern ist offensichtlich
unabh"angig von derjenigen bei den Frauen, so dass die Gesamtzahl der
m"oglichen Anordnungen auf dem Erinnerungsfoto $7!\cdot 7!=5040^2=25401600$
ist.
\end{loesung}

\item
\label{nachtessen}
Drei Mathematiker und drei Ingenieure treffen sich zu einem
einem Nachtessen an einem runden Tisch.
\begin{teilaufgaben}
\item
Auf wieviele Arten k"onnen die Teilnehmer die Pl"atze einnehmen?
\item
Auf wieviel Arten k"onnen 
die Teilnehmer die Pl"atze einnehmen, wenn nicht alle drei Mathematiker
oder Ingenieure nebeneinander sitzen d"urfen?
\end{teilaufgaben}

\begin{loesung}
\begin{teilaufgaben}
\item
Man muss offenbar herausfinden, in wievielen m"oglichen Reihenfolgen
man die sechs Teilnehmer auf die sechs Pl"atze setzen kann. Dies
sind $6!$ M"oglichkeiten.
\item
Es spielt keine Rolle, ob wir untersuchen, wann die Mathematiker 
nebeneinander sitzen und wann die Ingenieure, denn sobald die Mathematiker
nebeneinander sitzen tun es auch die Ingenieure.

Wir wissen bereits, dass die Leute auf $6!=720$ Arten platziert werden
k"onnen. Wir m"ussen also nur herausfinden, wieviele Platzierungen
unerw"unscht sind (weil drei Mathematiker nebeneinander sitzen),
dann wissen wir auch, auf wieviele erw"unschte Arten die Teilnehmer
sitzen k"onnen.
An einem runden Tisch gibt es sechs Pl"atze, wo im Uhrzeigersinn gez"ahlt 
die Gruppe der Mathematiker beginnen kann. Und zu jeder dieser
sechs M"oglichkeiten gibt es $3!$ Anordnungen der Mathematiker innerhalb
der Gruppe. Es gibt also $6 \cdot 3!$ M"oglichkeiten, die Mathematiker
in einer Dreiergruppe zu platzieren.
Die Ingenieure sitzen zwar garantiert nebeneinander, k"onnen aber
innerhalb ihrer Dreiergruppe auch noch beliebig die Pl"atze
tauschen, und zwar auf $3!$ verschiedene Arten. Somit gibt es
\[
6\cdot 3!\cdot 3!=6\cdot 6\cdot 6=6^3=216
\]
unerw"unschte Platzierungen. Folglich gibt es $720-216=504$ zul"assige
Platzierungen der G"aste.
\end{teilaufgaben}
\end{loesung}

\end{beispiele}

Die Fakult"at kann man in Octave/Matlab mit der Funktion {\tt factorial}
berechnen. Die letzte Aufgabe kann in Octave zum Beispiel so gerechnet
werden:
\begin{verbatim}
octave> factorial(6) - 6 * factorial(3) * factorial(3)
ans =  504
\end{verbatim}
\index{factorial@{\tt factorial}}

\section{Kombinationen: Auswahl}
\index{Kombinationen}
\index{Auswahl}
Auf wieviele Arten kann $k$ aus $n$ verschiedenen Objekten
ausw"ahlen. Auch diese Frage kann ein Abz"ahlargument
beantworten.  Sei $C^n_k$ die Anzahl der M"oglichkeiten,
$k$ aus $n$ Objekten auszuw"ahlen. Es ist also zun"achst
$k$ mal eine Auswahl zu treffen. F"ur die erste Auswahl
stehen $n$ Objekte zur Verf"ugung. F"ur jede solche Wahl
bleiben jetzt noch $k-1$ Wahlen zu treffen. F"ur die zweite
Auswahl stehen aber nur noch $n-1$ Alternativen zur Verf"ugung,
bisher haben wir also $n(n-1)$ M"oglichkeiten. Wiederholen wir
dies, finden wir insgesamt $n(n-1)(n-2)\dots(n-k+1)$ M"oglichkeiten
(das Produkt hat $k$ Faktoren). In diesem Prozess werden
aber all m"oglichen Permutationen der resultierenden Auswahl
unabh"angig voneinander erzeugt, obwohl sie uns nicht
interessieren. Wir erhalten also soviel mal zu viele L"osungen, wie
es Permutationen von $k$ Objekten gibt. Man muss also noch durch
$P_k=k!$ teilen:
\[
C^n_k=\frac{n(n-1)(n-2)\cdots(n-k+1)}{k!}.
\]
Durch Erweitern mit $(n-k)!$ bekommt man eine etwas
kompaktere Formel:
\[
C^n_k=\frac{n(n-1)(n-2)\cdots(n-k+1)\cdot(n-k)(n-k-1)\cdots2\cdot 1}{k!(n-k)!}
=\frac{n!}{k!(n-k)!}
\]

Auch f"ur diese Gr"osse kann man eine Rekursionsformel finden.
Die Zahl der Auswahlen von $k$ Elementen aus $n$ gibt es
offenbar $C^{n-1}{k}$ auswahlen, welche das erste Element nicht
enthalten, und $C^{n-1}_{k-1}$ Auswahlen, die dadurch entstehen,
dass man zun"achst das erste Element in die Auswahl nimmt, und dann
aus den verbleibenden Elementen deren $k-1$ hinzuf"ugt. Es muss also
gelten:
\index{Rekursionsformel!der Binomialkoeffizienten}
\[
C^n_k=C^{n-1}_{k-1}+C^{n-1}_{k}
\]
Diese Rekursionsformel ist aber identisch mit der Rekursionsformel
der Binomialkoeffizienten, also gilt
\index{Binomialkoeffizient}
\[
C^n_k=\binom{n}{k}.
\]

\begin{beispiele}
\item In einen Wald mit 1000 B"aumen schl"agt f"unfmal der Blitz ein.
Wir d"urfen annehmen, dass kein Baum zweimal getroffen, denn der
Einschlag wird den Baum weitgehend zerst"oren. Auf wieviele Arten
k"onnen die getroffenen B"aume im Wald verteilt sein?

\begin{loesung}
Offenbar geht es darum, 5 von 1000 B"aumen auszuw"ahlen, was 
auf
\[
\binom{1000}{5}=8250291250200
\]
verschiedene Arten m"oglich ist.
\end{loesung}

\item F"ur ein Projekt stellt eine Firma mit 30 Mitarbeitern eine Taskforce
aus 5 Leuten zusammen. Auf wieviele Arten ist das m"oglich?


\begin{loesung}
Es geht darum $5$ von $30$ Mitarbeiter auszuw"ahlen, was auf
\[
\binom{30}{5}=142506
\]
Arten geht.
\end{loesung}

\item Im Gegensatz zu vorangegangenen Beispiel ist jetzt der
Taskforceleiter schon festgelegt, wieviele Gestaltungen der
Task-Force bleiben?

\begin{loesung}
Jetzt stehen nur noch 29 Mitarbeiter zur Verf"ugung (der Taskforceleiter
steht nicht mehr zur Auswahl), es m"ussen aber auch nur noch 4 ausgew"ahlt
werden. Dies ist auf
\[
\binom{29}{4}=23751
\]
Arten m"oglich.
\end{loesung}

\item\label{meisterschaft}
Ein Land muss f"ur eine Meisterschaft aus einem Pool von
20 M"annern und 10 Frauen eine Delegation von je 5 M"annern
und Frauen zusammenstellen. Auf wieviele Arten ist dies m"oglich?

\begin{loesung}
Die Auswahl der M"anner und Frauen erfolgt unabh"angig. Es gibt
$\binom{20}{5}=15504$ m"ogliche Auswahlen bei den M"annern,
und $\binom{10}{5}=252$ m"ogliche Auswahlen bei den Frauen. Insgesamt also
\[
\binom{20}{5}\binom{10}{5}=15504\cdot 252 = 3907008
\]
m"ogliche Delegationen.
\end{loesung}

\item In welchem Prozentsatz der im vorangegangenen Beispiel
zusammengestellten Delegationen ist eine ganz bestimmte Frau
nicht dabei, in welchem Prozentsatz ein ganz bestimmter Mann?

\begin{loesung}
Um den Prozentsatz der Delegationen zu bestimmen, bei denen
eine ganz bestimmte Frau nicht dabei ist, m"ussen wir Z"ahlen,
wieviele Delegationen sich ohne diese Frau zusammenstellen 
lassen. Dazu stehen offenbar nur 9 Frauen zur Verf"ugung, die 
Anzahl der Delegationen ist also
\[
\binom{20}{5}\binom{9}{5}=15504\cdot 126 = 1953504.
\]
Der Anteil dieser Delegationen ist
\[
\frac{
\binom{20}{5}\binom{9}{5}
}{
\binom{20}{5}\binom{10}{5}
}
=
\frac{ \binom{9}{5} }{ \binom{10}{5} }
=
\frac{126}{252}=\frac12
\]
\end{loesung}
Bei den M"annern f"uhrt die analoge Rechnung auf
\[
\frac{\binom{19}{5}}{\binom{20}{5}}=\frac{11628}{15504}=\frac34.
\]
Ein bestimmter Mann ist also bei 3 von 4 Delegationen nicht dabei,
eine bestimmte Frau aber nur bei 2 von 4.
\item Ein Medium behauptet, er k"onnen durch Handauflegen ersp"uren, ob
der Gegenstand in einer Schachtel f"ur ein Gewaltverbrechen verwendet
worden sei.
Daher wird folgender Test durchgef"uhrt.
$n=6$
Schachteln werden pr"apariert, und eine enth"alt ein Messer,
welches in einem Mordfall als Tatwaffe verwendet worden war.
Die anderen f"unf enthalten je eine Lindor Schoggikugel frisch aus der Packung.
Wir d"urfen annehmen, dass die Schoggikugeln nicht f"ur ein Gewaltverbrechen
verwendet worden sind. Das Medium soll jetzt erf"uhlen, in welcher
Schachtel die Tatwaffe steckt. Weil das ziemlich schwierig ist, erlauben
wir dem Medium zwei Tips und sind zufrieden wenn eine der beiden
gew"ahlten Schachteln die Tatwaffe enth"alt. Wie viele M"oglichkeiten gibt
es f"ur das Medium Erfolg oder Misserfolg zu haben?
Wie sieht es aus, wenn man $n$ gr"osser macht?

\begin{loesung}
Es gibt offenbar $\binom{6}{2}$ M"oglichkeiten, zwei Schachteln auszuw"ahlen,
aber nur $\binom{5}{2}$ M"oglichkeiten, zwei Schachteln auszuw"ahlen,
die die Tatwaffe nicht enthalten.
\[
\binom{6}{2}=15,\qquad\binom{5}{2}=10.
\]
Es gibt also 5 M"oglichkeiten f"ur Erfolg, und 10 M"oglichkeiten
f"ur Misserfolg.

Offenbar kann man das auch f"ur beliebige $n$ ausrechnen. Aus $n$
Schachteln $2$ ausw"ahlen ist auf $\binom{n}2$ Arten m"oglich, in
$\binom{n-1}2$ F"allen findet man die Tatwaffe nicht. Die Erfolgsf"alle
sind
\[
\binom{n}2-\binom{n-1}2
=\frac{n(n-1)}2-\frac{(n-1)(n-2)}2
=\frac{n-1}2(n-(n-2))=n-1.
\]
Die Erfolgsquote ist also
\[
\frac{n-1}{\displaystyle\binom{n}2}=\frac{n-1}{\displaystyle\frac{n(n-1)}2}=\frac2n.
\]
Man kann daraus schliessen, dass ein Medium, welches nichts kann,
trotzdem in $2$ von $n$ F"allen die Tatwaffe finden wird.
Wenn wir also einen Betr"uger von einem echten Medium unterscheiden
wollen, m"ussen wir die Zahl $n$ so gross w"ahlen, dass nur ganz
wenige Betr"uger eine Chance haben. Verlangen wir $n=20$, dann
besteht immer noch jeder zehnte Betr"uger den Test. Offenbar ist unser
Test viel zu leicht.
\end{loesung}

\end{beispiele}
Die Zahl der Kombinationen kann in Octave/Matlab mit der Funktion
{\tt nchoosek} berechnet werden. Die Aufgabe~\ref{meisterschaft}
kann zum Beispiel so gerechnet werden:
\begin{verbatim}
octave> nchoosek(20,5) * nchoosek(10,5)
ans =  3907008
\end{verbatim}
\index{nchoosek@{\tt nchoosek}}

\section{Zusatzbedingungen}
Oft muss man Objekte z"ahlen und dabei noch zus"atzliche Einschr"ankungen
ber"ucksichtigen. Oft sind zu diesem Zweck Symmetriebetrachtungen
n"utzlich.

\begin{beispiele}
\item Dominosteine enthalten zwei Felder, die mit je einer Augenzahl
aus $\{0,1,2,3,4,5,6\}$ beschriftet sind. Wieviele verschiedene Dominosteine
gibt es?

\begin{loesung}
Zwar ist jede Kombination m"oglich, aber die beiden Dominosteine
mit den Zahlen $(x,y)$ und $(y,x)$ sind identisch. In den nach der
Produktregel berechneten $7\cdot 7=49$ Paaren sind jeweils die Paare
mit verschiedenen Zahlen doppelt gez"ahlt. Wir m"ussen also z"ahlen,
auf wieviele Arten wir zwei verschiedene Zahlen auf die Dominosteine
schreiben k"onnen. Dazu m"ussen offenbar zwei Augenzahlen aus
der Menge $\{0,1,2,3,4,5,6\}$ gezogen werden, was auf 
$\binom{7}{2}=21$ Arten m"oglich ist. Die Anzahl der verschiedenen
Dominosteine ist also $49 - \binom{7}{2}=49-21=28$.

Alternativ h"atte man dies auch so z"ahlen k"onnen. In den 49 Paaren sind
einzige die sieben Dominosteine mit zwei gleichen Augenzahlen nicht doppelt
gez"ahlt worden. Nimmt man die nochmals hinzu, erh"alt man doppelt so viel
wie es m"ogliche Dominosteine gibt, also gibt es
\[
\frac{49+7}{2}=\frac{56}2=28
\]
Dominosteine.
\end{loesung}

\item Beim Spiel Eile mit Weile darf man nochmals w"urfeln, wenn
man eine 6 gew"urfelt hat, h"ochstens aber drei mal. Wieviele
m"ogliche W"urfelszenarien gibt es?

\begin{loesung}
Es gibt 6 M"oglichkeiten f"ur den ersten Wurf.
Bei 5 dieser M"oglichkeiten endet das Szenario an dieser Stelle.
In einem der
F"alle wird nochmals gew"urfelt, wobei es wieder 6 M"oglichkeiten
gibt, mit wieder genau einem Fall, in dem nochmals gew"urfelt wird.
Man hat also insgesamt 
\[
5 + 5 + 6=16
\]
m"ogliche Szenarien.
\end{loesung}

\end{beispiele}

Kommplizierte F"alle sind ebenfalls denkbar. Sie entstehen meist dadurch, 
dass eine die zu z"ahlenden Objekte beliebig vielen zus"atzlichen
Bedingungen unterworfen werden k"onnen. In solchen Situationen
f"uhrt oft folgende Strategie zum Ziel:
\begin{enumerate}
\item Zeichne ein Mengendiagramm f"ur die Gesamtheit aller F"alle.
\item Zeichen in diesem Diagramm alle Teilmengen, die durch 
die zus"atzlichen Bedingungen ausgezeichnet werden.
\item Bestimme die Anzahl M"oglichkeiten in jeder Schnitt-, Vereinigungs-
und Differenzmenge.
\end{enumerate}
Genau so sind wir in Beispiel~\ref{nachtessen} von
Abschnitt~\ref{kombinatorik-permutation} vorgegangen,
als wir zun"achst die Anzahl der unerw"unschten Platzierungen
von Mathematikern und Ingenieuren ermittelt haben, und dann daraus
die die urspr"unglich gesucht Anzahl der erw"unschten Platzierungen
abgeleitet haben.

\section{Erzeugende Funktionen}
\index{erzeugende Funktion}
Oftmals lassen sich schwierige kombinatorische Fragestellungen in
algebraische oder analytische Probleme umformulieren. Damit steht
dann der Apparat der Analysis zur Verf"ugung.

Als einf"uhrendes
Beispiel betrachten wir nochmals die Bestimmung von $C^n_k$.
Statt jeden Wert von $C^n_k$ einzeln zu bestimmen, packen wir
die Koeffizienten zusammen in eine Funktion
\[
p_n(z)=C^n_0+C^n_1z +C^n_2z^2+\dots+C^n_{n-1}z^{n-1}+C^n_nz^n.
\]
Interpretieren wir zun"achst $p_1(z)$. Die Koeffizienten dieses
Polynoms geben an, auf wieviele Arten man kein Element aus einer
einelementigen Menge ausw"ahlen kann, bzw.~auf wieviele Arten man 
ein Element ausw"ahlen kann. Beides ist genau auf eine Art m"oglich,
also
\[
p_1(z)=1+z
\]
Betrachten wir jetzt $p_1(z)^n$. Beim Ausmultiplizieren des
Produktes 
\[
p_1(z)^n= (1+z)(1+z)\cdots(1+z),
\]
stellt sich die Frage, wie viele Summanden $z^k$ f"ur jedes
$k$ auftreten werden.
Damit $z^k$ ensteht, muss in $k$ Faktoren das $z$ gew"ahlt werden,
und in den anderen $n-k$ Faktoren die $1$. Dies ist auf $C^n_k$
Arten m"oglich, wir haben also gezeigt, dass
\[
p_n(z)=(1+z)^n=\sum_{k=1}^n \binom{n}{k}z^k
\]
ist, woraus
\[
C^n_k=\binom{n}{k}
\]
folgt.

Alternativ kann man zu diesem Resultat auch wie folgt gelangen.
Wir kennen bereits die Rekursionsformel
\[
C^n_k=C^{n-1}_{k-1}+C^{n-1}_k
\]
"Ubersetzt in die erzeugende Funktion heisst dies, dass die Koeffizienten
f"ur den oberen Index $n-1$
um eine Stelle verschoben und dann addiert werden m"ussen,
um die Koeffizienten f"ur den oberen Index $n$ zu ergeben. Verschiebt
man die Koeffizienten von $p_{n-1}(z)$ um $1$,
erh"alt man die erzeugende Funktion
\[
C^{n-1}_0z
+C^{n-1}_1z^2
+C^{n-1}_2z^3
+\dots
+C^{n-1}_{n-2}z^{n-1}
+C^{n-1}_{n-1}z^n
=zp_{n-1}(z)
\]
Den Koeffizienten $C^{n-1}_{k-1}$ entspricht also die
erzeugende Funktion $zp_{n-1}(z)$,
den Koeffizienten $C^{n-1}_k$ dagegen die erzeugende Funktion $p_{n-1}(z)$.
Die Rekursionsformel f"ur $C^n_k$ l"asst sich also in die Formel
\[
p_n(z)=p_{n-1}(z)+zp_{n-1}(z)=(1+z)p_{n-1}(z)
\]
"ubersetzen. Daraus folgt wieder $p_n(z)=(1+z)^n$.

Falls die erzeugende Funktion auf dem Wert $1$ ausgewertet werden kann,
liefert sie die Summe aller Glieder der Folge:
\[
\sum_{k=0}^\infty a_k=p(1).
\]
F"ur die Binomialkoeffizienten ergibt sich:
\[
\sum_{k=0}^\infty\binom{n}{k}=p_n(1)=(1+1)^n=2^n.
\]

Die erzeugende Funktion einer unendlichen Folge $a_0,a_1,a_2,\dots$ ist
die Potenzreihe
\[
a_0+a_1z+a_2z^2+a_3z^3+\dots=\sum_{k=0}^\infty a_kz^k
\]
Die erzeugende Funktion der Folge der Binomialkoeffizienten $\left(\binom{n}{k}\right)_{0\le k\le  n}$ ist also die Funktion $(1+z)^n$.
Die erzeugende Funktion der konstanten Folge $1,1,1,\dots$ ist
\[
1+z+z^2+z^3+\dots=\sum_{k=0}^\infty z^k=\frac1{1-z}
\]

\begin{beispiele}
\item 
Auf wieviele Arten kann man 90 Rappen mit den verf"ugbaren M"unzen
herausgeben?

Die verf"ugbaren M"unzen sind 5er, 10er, 20er und 50er.
Statt das Problem f"ur 90 Rappen zu l"osen, l"osen wir es f"ur jeden
denkbaren Betrag.
Wenn wir dazu nur 5er verwenden d"urfen, dann k"onnen wir ausschliesslich
die durch f"unf teilbaren Rappen-Betr"age herausgeben, und zwar immer
auf eindeutige Art. Die Zahl $a_n$ der M"oglichkeiten, mit der der Betrag
$n$ herausgegeben werden kann, ist also
\[
a_n = \begin{cases}
1&\qquad n\equiv 0\mod 5\\
0&\qquad \text{sonst}
\end{cases}
\]
Die erzeugende Funktion davon ist
\[
C_5(x)=\sum_{k=0}^\infty a_kx^k=1+x^5+x^{10}+x^{15}+x^{20}+x^{25}+\dots
\]
K"onnten wir ausschliesslich 10er verwenden, w"are die entsprechende
erzeugende Funktion
\[
C_{10}(x)=1+x^{10}+x^{20}+x^{30}+x^{40}+x^{50}+\dots
\]
Wenn wir 5er und 10er verwenden d"urfen, dann muss ein Teil des Betrages
in 5ern, der Rest in 10er herausgegeben werden.
Diese Zusammensetzung entspricht genau dem, was beim Ausmultiplizieren
der beiden Reihen $C_5(x)$ und $C_{10}(x)$ passiert. Mit einem Computer-Algebra-System kann man die Multiplikation sofort vornehmen:
\begin{align*}
C_5(x)C_{10}(x)&=
 1+x^5+2 x^{10}+2 x^{15}+3 x^{20}+3 x^{25}+4 x^{30}+4 x^{35}+5 x^{40}\\
&\qquad +5 x^{45} +6 x^{50}+6 x^{55}+7 x^{60}+7 x^{65}+8 x^{70}+8 x^{75}+9 x^{80}\\
&\qquad +9 x^{85}+10 x^{90}+10 x^{95}+11 x^{100}+\dots
\end{align*}
Man kann daraus ablesen, dass es zwei M"oglichkeiten gibt, 10 Rappen
herauszugeben, entweder zwei 5er oder ein 10er. Ebenso kann man ablesen,
dass es 10 M"oglichkeiten gibt, 90 Rappen zu bilden, mit 0 bis 9 10ern
und der dazu passenden Anzahl 5er.

Nehmen wir jetzt noch die 20er und 50er hinzu, dann kommen die beiden
zus"atzlichen Funktionen
\begin{align*}
C_{20}(x)&= 1+x^{20}+x^{40}+x^{60}+x^{80}+x^{100}+\dots\\
C_{50}(x)&=1+x^{50}+x^{100}+\dots
\end{align*}
hinzu. Die erzeugende Funktion, mit der wir die M"oglichkeiten z"ahlen
k"onnen, auf wieviele Arten man den Betrag aus allen M"unzen bilden kann,
ist dann
\begin{align*}
C_5(x) C_{10}(x) C_{20}(x) C_{50}(x)
&=
1+x^5+2 x^{10}+2 x^{15}+4 x^{20}+4 x^{25}+6 x^{30}\\
&\qquad
+6 x^{35} +9 x^{40} +9 x^{45}+13 x^{50}+13 x^{55}\\
&\qquad
+18 x^{60}+18 x^{65} +24 x^{70}+24 x^{75}+31 x^{80}\\
&\qquad
+31 x^{85}+39 x^{90}+39 x^{95} +49 x^{100}+\dots
\end{align*}
Daraus k"onnen wir jetzt ablesen, dass 90 Rappen auf 39 Arten
gebildet werden k"onnen.
\end{beispiele}

Man kann diese Produkte nicht nur mit einem Computer-Algebra-System
ausrechnen, sondern auch mit Octave. Octave stellt Polynome als
Vektoren von Koeffizienten der einzelnen Monome geordnet nach Grad
absteigend. Als Beispiel versuchen wir auszurechnen, auf wieviele
Arten man 11 Franken zusammensetzen kann, wenn man 2 F"unfliber,
5 Zweifr"ankler und 11 Einfr"ankler zur Verf"ugung hat. Die
Polynome werden
\begin{align*}
C_1&=z^{11}+z^{10}+z^9+z^8+z^7+z^6+z^5+z^4+z^3+z^2+z+1\\
C_2&=z^{10}+z^8+z^6+z^4+z^2+1\\
C_5&=z^{10}+z^5+1
\end{align*}
In Octave k"onnen diese Polynome als Zeilenvektoren eingegeben werden:
\begin{verbatim}
octave> c1 = [1,1,1,1,1,1,1,1,1,1,1,1]
c1 =

   1   1   1   1   1   1   1   1   1   1   1   1

octave> c2 = [1,0,1,0,1,0,1,0,1,0,1]
c2 =

   1   0   1   0   1   0   1   0   1   0   1

octave> c5 = [1,0,0,0,0,1,0,0,0,0,1]
c5 =

   1   0   0   0   0   1   0   0   0   0   1
\end{verbatim}
Das Produkt der Polynome berechnet man in Octave mit der Funktion
{\tt conv}, also der Faltung zweier Vektoren. Im vorliegenden Fall
bekommt man
\begin{verbatim}
octave:11> c = conv(c1,conv(c2,c5))
c =

 Columns 1 through 16:

  1  1  2  2  3  4  5  6  7  8 10 11 11 12 12 13

 Columns 17 through 32:

 13 12 12 11 11 10  8  7  6  5  4  3  2  2  1  1
\end{verbatim}
Um jetzt herauszufinden, auf wieviele Arten man 11 Franken
kombinieren kann, muss man den Koeffizienten von $z^{11}$ in diesem
Polynom finden, also den zw"olften Koeffizienten vom Ende des
Vektors, zum Beispiel so:
\begin{verbatim}
octave> c(length(c)-11)
ans =  11
\end{verbatim}
Man kann also 11 Franken auf 11 verschiedene Arten aus Fr"anklern,
Zweifr"anklern und F"unflibern zusammensetzen.

Im Moment scheint diese Verfahren keine wirklich Vereinfachung
zu sein. Doch die Verwendung der geometrischen Reihe erlaubt, die
Funktionen $C_n(x)$ zu vereinfachen:
\[
C_n(x)=1+x^n+x^{2n}+x^{3n}+\dots = \frac1{1-x^n}.
\]
Damit wird die uns interessierende Funktion
\begin{align*}
C_5(x) C_{10}(x) C_{20}(x) C_{50}(x)
&=
\frac1{1-x^5}\cdot
\frac1{1-x^{10}}\cdot
\frac1{1-x^{20}}\cdot
\frac1{1-x^{50}}
\\
&=
\frac1{
(1-x^5)
(1-x^{10})
(1-x^{20})
(1-x^{50})
}
\end{align*}
Eine solche Funktion kann von einem Computer-Algebra-System sehr effizient
in eine Reihe umgewandelt werden, an der man das Resultat ablesen kann.

Man kann allerdings noch einen Schritt weiter gehen. Kehren wir dazu zum
einf"uhrenden Beispiel zur"uck, bei dem wir nur 5er und 10er verwenden
d"urfen. Wir suchen eine Reihe
\[
C_5(x)C_{10}(x)=c_0+c_1x+c_2x^2+c_3x^3+\dots=\sum_{k=0}^\infty c_kx^k
\]
derart, dass
\[
(1-x^5)(1-x^{10}) \sum_{k=0}^\infty c_kx^k=1
=
(1-x^5-x^{10}+x^{15}) \sum_{k=0}^\infty c_kx^k=1
\]
Durch ausmultiplizieren findet man aus der rechten Seite

\begin{align*}
C_5(x)C_{10}(x)&=c_0\\
&+c_1x\\
&+c_2x^2\\
&+c_3x^3\\
&+c_4x^4\\
&+(c_5-c_0)x^5\\
&+(c_6-c_1)x^6\\
&+(c_7-c_2)x^7\\
&+(c_8-c_3)x^8\\
&+(c_9-c_4)x^9\\
&+(c_{10} - c_5 -c_0)x^{10}\\
&+(c_{11} - c_6 -c_1)x^{11}\\
&+(c_{12} - c_7 -c_2)x^{12}\\
&+(c_{13} - c_8 -c_3)x^{13}\\
&+(c_{14} - c_9 -c_4)x^{14}\\
&+(c_{15} - c_{10} - c_{5} +c_0)x^{15}\\
&+(c_{16} - c_{11} - c_{6} +c_1)x^{16}\\
&+(c_{17} - c_{12} - c_{7} +c_2)x^{17}\\
&+(c_{18} - c_{13} - c_{8} +c_3)x^{18}\\
&+(c_{19} - c_{14} - c_{9} +c_4)x^{19}\\
&+\dots
\end{align*}
Aus $C_{5}(x)C_{10}(x)=1$ folgt, dass $c_0=1$ sein muss, und alle
h"oheren Koeffizienten m"ussen verschwinden. Insbesondere verschwinden
alle Koeffizienten, die nicht durch 5 teilbar sind. Es bleiben also nur noch
die Gleichungen:
\begin{align*}
c_5&=c_0=1\\
c_{10}&=c_5+c_0=2\\
c_{15}&=c_{10}+c_{5}-c_0=2 + 1 - 1=2\\
c_{5n}&=c_{5(n-1)}+c_{5(n-2)}-c_{5(n-3)}
\end{align*}
F"ur die Koeffizienten gibt es also eine Rekursionsgleichung, aus der wir
nacheinander die Koeffizienten berechnen k"onnen. Es ist nat"urlich nicht
"uberraschend, dass wir die L"osung
\[
1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, \dots
\]
finden.

F"ur das volle Problem ist die Rekursionsgleichung etwas komplizierter, n"amlich
\begin{align*}
c_{5(n+17)} % 0
-c_{5(n+16)} % 5
-c_{5(n+15)} % 10
+c_{5(n+14)} % 15
-c_{5(n+13)} % 20
+c_{5(n+12)} % 25
&
\\
+c_{5(n+11)} % 30
-c_{5(n+10)} % 35
%c_{5(n+9)} % 40
%-c_{5(n+8)} % 45
-c_{5(n+7)} % 50
+c_{5(n+6)} % 55
+c_{5(n+5)} % 60
&
\\
-c_{5(n+4)} % 65
+c_{5(n+3)} % 70
-c_{5(n+2)} % 75
-c_{5(n+1)} % 80
+c_{5(n)} % 85
&=0
\end{align*}
Andererseits gibt es ein allgemeines Verfahren, wie man eine solche
Differenzengleichung l"osen kann, es gibt daher auch eine allgemeine
Formel, mit der man die $c_{5n}$ berechnen kann.




